!function(a){"use strict";angular.module("angular-tour",["angular-tour.tpls","angular-tour.tour"]),angular.module("angular-tour.tpls",["tour/tour.tpl.html"]),angular.module("tour/tour.tpl.html",[]).run(["$templateCache",function(a){a.put("tour/tour.tpl.html",'<div class="tour-tip" ng-click="preventDefault($event);">\n	<span class="tour-arrow tt-{{ ttPlacement + \'-\' + ttAlign }}-border"></span>\n    <span class="tour-arrow tt-{{ ttPlacement + \'-\' + ttAlign }}"></span>\n	<div class="tour-tip-header">\n		<a ng-click="closeTour()" class="tour-close-tip">Ã—</a>\n	</div>\n	<div class="tour-tip-body">\n		<div class="tour-content-wrapper">\n	        <p ng-bind-html="ttContent"></p>\n	    </div>\n	</div>\n	<div class="tour-tip-footer">\n		<a ng-if="!ttFirst" ng-click="setPrevStep()" ng-bind-html="ttBackLabel" class="small button tour-prev-tip"></a>\n		<a ng-if="!ttLast" ng-click="setNextStep()" ng-bind-html="ttNextLabel" class="small button tour-next-tip"></a>\n		<a ng-if="ttLast" ng-click="setNextStep()" ng-bind-html="ttFinishLabel" class="small button tour-last-tip"></a>\n	</div>\n	    \n</div>')}]),angular.module("angular-tour.tour",["easingFunctions"]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",backLabel:"Back",finishLabel:"Finish",scrollSpeed:500,offset:5,appendToBody:!1,delay:0}).controller("TourController",["$scope","$rootScope","tourtipMap",function(a,b,c){var d=this;d.currentIndex=0,d.newList=function(){b.tourActive&&d.cancelTour(),d.steps=c()},d.newList(),d.currentStep=d.steps.get(0),d.select=function(a){a&&(d.unselectAllSteps(),d.currentStep&&d.currentStep.ttPostStep(d.currentStep.$parent),d.currentStep=a,d.currentIndex=a.index,d.currentStep.ttPreStep(d.currentStep.$parent),a.open())},d.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)&&d.steps.set(a.index,a)},d.unselectAllSteps=function(){d.steps.forEach(function(a){a.close()})},d.cancelTour=function(){d.unselectAllSteps(),d.currentStep&&d.currentStep.ttPostStep(d.currentStep.$parent),d.postStepCallback(),d.postTourCallback(),d.currentIndex=0,d.currentStep=null,b.tourActive=!1},b.openTour=function(){var a=d.steps.get(0);a&&(d.setStep(a),b.tourActive=!0)},b.closeTour=function(){d.cancelTour()},b.tourStepsCount=function(){return d.steps.getCount()},b.ttNextStep=function(a){var a=(a||d.currentIndex)+1,c=d.steps.get(a);if(c)d.setStep(c);else{var e=d.steps.keys(),f=e[e.length-1];f>=a?b.ttNextStep(a+1):d.cancelTour()}},b.ttPrevStep=function(a){var a=(a||d.currentIndex)-1,c=d.steps.get(a);if(c)d.setStep(c);else{var e=d.steps.keys(),f=e[0];a>=f?b.ttNextStep(a-1):d.cancelTour()}}}]).directive("tour",["$rootScope","$parse",function(a,b){return{controller:"TourController",restrict:"EA",scope:!0,link:function(c,d,e,f){if(!angular.isDefined(e.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var g=b(e.step);c.$on(e.rebuildOn?e.rebuildOn:"$locationChangeStart",function(){f.newList()}),f.postTourCallback=function(){c.$parent.$eval(e.postTour||"angular.noop()")},f.postStepCallback=function(){c.$parent.$eval(e.postStep||"angular.noop()")},f.setStep=function(a){g.assign(c.$parent,a.index),f.select(a)},c.setNextStep=function(){a.ttNextStep()},c.setPrevStep=function(){a.ttPrevStep()}}}}]).directive("tourtip",["$window","$compile","$parse","$timeout","$sce","tourConfig",function(a,b,c,d,e,f){var g="<div tour-popup></div>";return{require:"^?tour",restrict:"EA",scope:!0,compile:function(d){var h=(d.scrollParent(),angular.element('<div class="tourtip-target"></div>'));return{pre:function(a,b,d,g){angular.extend(a,{ttContent:e.trustAsHtml(d.tourtip||""),ttPlacement:d.tourtipPlacement||f.placement,ttAlign:"top bottom".match(d.tourtipPlacement)?d.tourtipAlign||"left":d.tourtipAlign||"top",ttNextLabel:e.trustAsHtml(d.tourtipNextLabel||f.nextLabel),ttBackLabel:e.trustAsHtml(d.tourtipBackLabel||f.backLabel),ttFinishLabel:e.trustAsHtml(d.tourtipFinishLabel||f.finishLabel),ttOffsetTop:parseInt(d.tourtipOffsetTop,10)||0,ttOffsetLeft:parseInt(d.tourtipOffsetLeft,10)||0,ttAppendToBody:a.$eval(d.tourtipAppendToBody)||f.appendToBody,ttPreStep:c(d.tourtipPreStep)||angular.noop,ttPostStep:c(d.tourtipPostStep)||angular.noop,ttNoScroll:a.$eval(d.tourtipNoScroll)||!1,ttTarget:d.tourtipTarget?$(d.tourtipTarget):h,ttIf:d.tourtipIf?!!a.$eval(d.tourtipIf):!0}),a.index=parseInt(d.tourtipStep,10),a.open=function(){a.ttOpen=!0},a.close=function(){a.ttOpen=!1},a.isFirstStep=function(){return a.index==g.steps.first().index},a.isLastStep=function(){return a.index==g.steps.last().index},a.close(),a.ttAnimation=f.animation,a.ttOffset=f.offset,a.ttIf&&(g.addStep(a),a.ttIf&&!a.ttAppendToBody&&b.wrap(h))},post:function(c,d){function e(){if(c.ttContent){d=d.height()||d.width()?d:d.parent(),i=d.scrollParent(),c.ttFirst=c.isFirstStep(),c.ttLast=c.isLastStep(),c.ttAppendToBody?($("body").append(m),m.css({position:"fixed"}),a.addEventListener("scroll",n)):(console.log("appending tourtip to targetEL",$scope.$id),m.css({position:"absolute"}),c.ttTarget.append(m)),m.css({display:"hidden"}),a.addEventListener("resize",n),c.ttAnimation?m.fadeIn():m.css({display:"block"});var b={duration:f.scrollSpeed},e=100,g=100;("top"===c.ttPlacement||"bottom"===c.ttAlign)&&(e+=m.height()<d.height()?0:m.height()-d.height(),g+=m.width()<d.width()?0:m.width()-d.width()),b.offsetTop=e,b.offsetLeft=g,j=q+p/2,k="left right".match(c.ttPlacement)?d.height()<=j:d.width()<=j,l=k?"left right".match(c.ttPlacement)?"top".match(c.ttAlign)?j-d.height()/2:j-d.height()/2:"left".match(c.ttAlign)?j-d.width()/2:j-d.width()/2:0,r(d,m),c.ttNoScroll||d.scrollIntoView(b)}}function h(){i.unbind("scroll",n),i=null,a.removeEventListener("scroll",n),a.removeEventListener("resize",n),m.detach()}if(c.ttIf){var i,j,k,l,m=b(g)(c),n=function(){r(d,m)},o=c.$watch("ttOpen",function(a,b){a!==b&&(a?e():h())}),p=28,q=22,r=function(a,b){var d=c.ttPlacement,e=c.ttAlign,f=c.ttOffset,g={};if(c.ttAppendToBody){var h=a[0].getBoundingClientRect(),i=(h.height,h.width,h.top),j=h.bottom,k=h.left,m=h.right,n=b.width(),o=b.height();"left right".match(d)?(g.top="top"===e?i-l+c.ttOffsetTop:j-o+l+c.ttOffsetTop,g.left="right"===d?m+f+q+c.ttOffsetLeft:k-n-f-q+c.ttOffsetLeft):(g.left="right"===e?m-n+l+c.ttOffsetLeft:k-l+c.ttOffsetLeft,g.top="top"===d?i-o-f-q+c.ttOffsetTop:j+f+q+c.ttOffsetTop),g.top+="px",g.left+="px",b.css(g)}else"left right".match(d)?("top"===e?g.top=0:g.bottom=0,"right"===d?g.left=100+q+f+c.ttOffsetLeft+"%":g.right=100+q+f+c.ttOffsetLeft+"%"):("right"===e?g.right=0:g.left=0,"top"===d?g.bottom=100+q+f+c.ttOffsetTop+"%":g.top=100+q+f+c.ttOffsetTop+"%"),b.css(g)};c.preventDefault=function(a){a.preventDefault(),a.stopImmediatePropagation(),a.cancelBubble=!0},c.$on("$destroy",function(){a.removeEventListener("scroll",n),a.removeEventListener("resize",n),o(),m.remove()})}}}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(){}}}).factory("tourtipMap",function(){var a=function(){this.map={}};a.prototype.set=function(a,b){angular.isNumber(a)&&!angular.isUndefined(b)&&(this.map[a]=b)},a.prototype.indexOf=function(a){var b=this;return angular.forEach(this.map,function(c,d){return b.map[d]===a?Number(d):void 0}),-1},a.prototype.remove=function(a){delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return Object.keys(this.map).length},a.prototype.forEach=function(a){angular.forEach(this.map,function(b,c){a(b,c)})},a.prototype.keys=function(){return Object.keys(this.map).sort(function(a,b){return a-b})},a.prototype.first=function(){return this.map[this.keys()[0]]},a.prototype.last=function(){var a=this.keys();return this.map[a[a.length-1]]};var b=function(){return new a};return b}),angular.module("easingFunctions",[]).factory("PennerEasing",function(){var a={};return a.linearTween=function(a,b,c,d){return c*a/d+b},a.easeInQuad=function(a,b,c,d){return a/=d,c*a*a+b},a.easeOutQuad=function(a,b,c,d){return a/=d,-c*a*(a-2)+b},a.easeInOutQuad=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},a.easeInCubic=function(a,b,c,d){return a/=d,c*a*a*a+b},a.easeOutCubic=function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},a.easeInOutCubic=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},a.easeInQuart=function(a,b,c,d){return a/=d,c*a*a*a*a+b},a.easeOutQuart=function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b},a.easeInOutQuart=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a+b:(a-=2,-c/2*(a*a*a*a-2)+b)},a.easeInQuint=function(a,b,c,d){return a/=d,c*a*a*a*a*a+b},a.easeOutQuint=function(a,b,c,d){return a/=d,a--,c*(a*a*a*a*a+1)+b},a.easeInOutQuint=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a*a+b:(a-=2,c/2*(a*a*a*a*a+2)+b)},a.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},a.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},a.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},a.easeInExpo=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},a.easeOutExpo=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},a.easeInOutExpo=function(a,b,c,d){return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b)},a.easeInCirc=function(a,b,c,d){return a/=d,-c*(Math.sqrt(1-a*a)-1)+b},a.easeOutCirc=function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},a.easeInOutCirc=function(a,b,c,d){return a/=d/2,1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:(a-=2,c/2*(Math.sqrt(1-a*a)+1)+b)},a.linear=a.linearTween,a.swing=a.easeInOutQuad,a["ease-in"]=a.easeInQuad,a["ease-out"]=a.easeOutQuad,a["ease-in-out"]=a.easeInOutQuad,a["ease-in-cubic"]=a.easeInCubic,a["ease-out-cubic"]=a.easeOutCubic,a["ease-in-out-cubic"]=a.easeInOutCubic,a["ease-in-quart"]=a.easeInQuart,a["ease-out-quart"]=a.easeOutQuart,a["ease-in-out-quart"]=a.easeInOutQuart,a["ease-in-quint"]=a.easeInQuint,a["ease-out-quint"]=a.easeOutQuint,a["ease-in-out-quint"]=a.easeInOutQuint,a["ease-in-sine"]=a.easeInSine,a["ease-out-sine"]=a.easeOutSine,a["ease-in-out-sine"]=a.easeInOutSine,a["ease-in-expo"]=a.easeInExpo,a["ease-out-expo"]=a.easeOutExpo,a["ease-in-out-expo"]=a.easeInOutExpo,a["ease-in-circ"]=a.easeInCirc,a["ease-out-circ"]=a.easeOutCirc,a["ease-in-out-circ"]=a.easeInOutCirc,a}).run(["PennerEasing",function(b){var c=angular.element,d=angular.isNumber,e=angular.isFunction,f=angular.isElement,g=angular.isString,h=angular.isObject;jQuery||c.fn.extend({parents:function(){function a(d){var e=c(d).parent()[0];return b.unshift(e),e.tagName.match("BODY")?jQuery(b):a(e)}var b=[];return a(this)},filter:function(a){var b=[];return angular.forEach(this,function(c,d){a(c,d)&&b.push(c)},this),c(b)}}),c.fn.extend({scrollParent:function(){var a=this.css("position"),b="absolute"===a,d=this.parents().filter(function(){var a=$(this);return b&&"static"===a.css("position")?!1:/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==a&&d.length?d:c("body")},scrollParents:function(){function a(d){var e=c(d).scrollParent()[0];return b.unshift(e),e.tagName.match("BODY")?jQuery(b):a(e)}var b=[];return a(this)},scrollOffset:function(){var a=this.scrollParent(),b=!!a[0].tagName.match(/BODY/);return{top:b?this.offset().top:this.offset().top-a.offset().top+a.scrollTop(),left:b?this.offset().left:this.offset().left-a.offset().left+a.scrollLeft()}},scrollTo:function(a,i,j){function k(a){return r.scrollTop(parseInt(m(t,p,n,parseInt(l.duration)))),r.scrollLeft(parseInt(m(t,q,o,parseInt(l.duration)))),t+=s?a-s:16,s=a,t<l.duration?requestAnimationFrame(k):void(angular.isFunction(j)&&j())}if(g(a))a=isNaN(parseInt(a,10))?c(a)[0]:parseInt(a,10);else if(h(a)&&!f(a))throw new Error("Scroll target must be an HTML element, jqLite or jQuery object, selector string, or scrollTop nmerical value");e(i)&&(j=i,i={});var l={target:a,offsetTop:0,offsetLeft:0,duration:500,easing:"ease-in-out"};angular.extend(l,i),d(l.target)||l.target instanceof jQuery||(l.target=c(l.target));var m=b[l.easing];if(!m)throw new Error('easing function: "'+l.easing+'" is unsupported by the `scrollTo` service');var n,o,p,q,r=$(this);p=r.scrollTop(),q=r.scrollLeft(),n=d(l.target)?l.target-parseInt(l.offsetTop,10):l.target.scrollOffset().top-p-parseInt(l.offsetTop,10),o=d(l.target)?l.target-parseInt(l.offsetLeft,10):l.target.scrollOffset().left-q-parseInt(l.offsetLeft,10);var s,t=0;requestAnimationFrame(k)},scrollIntoView:function(b){e(b)&&(cb=b,b={});for(var d={},f=c(this).scrollParents(),g=1;g<f.length;g++)d.offsetTop=parseInt(a.innerHeight/(g+5),10),d.offsetLeft=parseInt(a.innerWidth/(g+5),10),c(f[g-1]).scrollTo(f[g],d);return $(this).scrollParent().scrollTo(this,b)}})}])}(window,document);