!function(a){"use strict";angular.module("angular-tour",["angular-tour.tpls","angular-tour.tour"]),angular.module("angular-tour.tpls",["tour/tour.tpl.html"]),angular.module("tour/tour.tpl.html",[]).run(["$templateCache",function(a){a.put("tour/tour.tpl.html",'<div class="tour-tip">\n	<span class="tour-arrow tt-{{ ttPlacement + \'-\' + ttAlign }}-border"></span>\n    <span class="tour-arrow tt-{{ ttPlacement + \'-\' + ttAlign }}"></span>\n	<div class="tour-tip-header">\n		<a ng-click="closeTour()" class="tour-close-tip">Ã—</a>\n	</div>\n	<div class="tour-tip-body">\n		<div class="tour-content-wrapper">\n	        <p ng-bind-html="ttContent"></p>\n	    </div>\n	</div>\n	<div class="tour-tip-footer">\n		<a ng-if="!ttFirst" ng-click="setPrevStep($event)" ng-bind-html="ttBackLabel" class="small button tour-prev-tip"></a>\n		<a ng-if="!ttLast" ng-click="setNextStep($event)" ng-bind-html="ttNextLabel" class="small button tour-next-tip"></a>\n		<a ng-if="ttLast" ng-click="setNextStep($event)" ng-bind-html="ttFinishLabel" class="small button tour-last-tip"></a>\n	</div>\n	    \n</div>')}]),angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",backLabel:"Back",finishLabel:"Finish",scrollSpeed:500,offset:10,appendToBody:!1,scrollTarget:"body",delay:0}).controller("TourController",["$scope","$rootScope","$attrs","$parse","tourtipMap",function(a,b,c,d,e){var f=this,g=d(c.step);f.postTourCallback=c.postTour||"angular.noop()",f.postStepCallback=c.postStep||"angular.noop()",f.currentIndex=0,f.newList=function(){a.tourActive&&f.cancelTour(),f.steps=e()},f.newList(),f.currentStep=f.steps.get(0),f.select=function(b){b&&(f.unselectAllSteps(),f.currentStep&&a.$parent.$eval(f.currentStep.ttPostStep),f.currentStep=b,f.currentIndex=b.index,a.$parent.$eval(b.ttPreStep),b.open())},f.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)&&f.steps.set(a.index,a)},f.unselectAllSteps=function(){f.steps.forEach(function(a){a.close()})},f.cancelTour=function(){f.unselectAllSteps(),f.currentStep&&a.$parent.$eval(f.currentStep.ttPostStep),f.postStepCallback(),f.postTourCallback(),f.currentIndex=0,f.currentStep=null,a.tourActive=!1},f.setStep=function(b){g.assign(a.$parent,b.index),f.select(b)},b.openTour=function(){console.log(f.steps);var b=f.steps.get(0);b&&(f.setStep(b),a.tourActive=!0)},b.closeTour=function(){f.cancelTour()},b.ttNextStep=function(a){if(a=(a||f.currentIndex)+1,a>=f.steps.getCount())return void f.cancelTour();var c=f.steps.get(a);c?f.setStep(c):b.ttNextStep(a)},b.ttPrevStep=function(a){if(a=(a||f.currentIndex)-1,0>a)return void f.cancelTour();var c=f.steps.get(a);c?f.setStep(c):b.ttPrevStep(a)}}]).directive("tour",["$rootScope",function(a){return{controller:"TourController",restrict:"EA",scope:!0,link:function(b,c,d,e){if(!angular.isDefined(d.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";b.$on(d.rebuildOn?d.rebuildOn:"$locationChangeStart",function(){e.newList()}),e.postTourCallback=function(){b.$parent.$eval(d.postTour||"angular.noop()")},e.postStepCallback=function(){b.$parent.$eval(d.postStep||"angular.noop()")},b.setNextStep=function(b){b&&(b.preventDefault(),b.stopImmediatePropagation()),a.ttNextStep()},b.setPrevStep=function(b){b&&(b.preventDefault(),b.stopImmediatePropagation()),a.ttPrevStep()}}}}]).directive("tourtip",["$window","$compile","$interpolate","$timeout","$sce","scrollTo","tourConfig",function(b,c,d,e,f,g,h){var i=(d.startSymbol(),d.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,compile:function(){var d=angular.element(b);return{pre:function(a,b,c,d){c.$observe("tourtip",function(b){a.ttContent=f.trustAsHtml(b||"")}),c.$observe("tourtipPlacement",function(b){a.ttPlacement=b||h.placement}),c.$observe("tourtipAlign",function(b){a.ttAlign="top bottom".match(a.ttPlacement)?b||"left":b||"top"}),c.$observe("tourtipNextLabel",function(b){a.ttNextLabel=f.trustAsHtml(b||h.nextLabel)}),c.$observe("tourtipBackLabel",function(b){a.ttBackLabel=f.trustAsHtml(b||h.backLabel)}),c.$observe("tourtipFinishLabel",function(b){a.ttFinishLabel=f.trustAsHtml(b||h.finishLabel)}),c.$observe("tourtipOffset",function(b){a.ttOffset=parseInt(b,10)||h.offset}),c.$observe("tourtipOffsetTop",function(b){a.ttOffsetTop=parseInt(b,10)||0}),c.$observe("tourtipOffsetLeft",function(b){a.ttOffsetLeft=parseInt(b,10)||0}),c.$observe("tourtipScrollTarget",function(b){a.ttFrame=b||h.scrollTarget}),c.$observe("tourtipAppendToBody",function(b){a.ttAppendToBody=a.$eval(b)||h.appendToBody}),c.$observe("tourtip-preStep",function(b){a.ttPreStep=b||"angular.noop()"}),c.$observe("tourtip-postStep",function(b){a.ttPostStep=b||"angular.noop()"}),c.$observe("tourtip-delay",function(b){a.ttPostStep=parseInt(b,10)||h.delay}),a.index=parseInt(c.tourtipStep,10),a.open=function(){a.ttOpen=!0},a.close=function(){a.ttOpen=!1},a.isFirstStep=function(){var b=parseInt(a.index.toString(),10);for(d.steps.getCount();b>=0;)if(b-=1,d.steps.get(b))return!1;return!0},a.isLastStep=function(){for(var b=parseInt(a.index.toString(),10),c=d.steps.getCount();c>b;)if(b+=1,d.steps.get(b))return!1;return!0},a.close(),a.ttAnimation=h.animation,a.ttOffset=h.offset,d.addStep(a)},post:function(b,f){function j(){if(b.ttContent){b.ttFirst=b.isFirstStep(),b.ttLast=b.isLastStep(),l.css({display:"none"}),b.ttAppendToBody?$("body").append(l):f.append(l),m="html,body".match(b.ttFrame)?$("body"):f.closest(b.ttFrame),d.bind("resize."+b.$id,n),("html,body".match(b.ttFrame)?d:m).bind("scroll",n),o(f,l);var c={duration:h.scrollSpeed},i="top"===b.ttPlacement||"bottom"===b.ttAlign?l.height()+b.ttOffset:b.ttOffset;m[0].tagName.match(/body/i)?c.offsetTop=a.innerHeight/3+i+50:(c.offsetTop=a.innerHeight/5,g($("body"),m,c),c.offsetTop=m.offset().top-m.height()/3+i+50),g(m,f,c),e(function(){b.ttAnimation?l.fadeIn():l.css({display:"block"})},b.ttDelay)}}function k(){m=f.closest(b.ttFrame),m.unbind("scroll",n),d.unbind("resize."+b.$id,n),l.detach()}var l=c(i)(b);f=f.height()||f.width()?f:f.parent();var m,n=function(){o(f,l)};e(function(){b.$watch("ttOpen",function(a){a?j():k()})},500);var o=function(a,c){var d=(b.ttAppendToBody,a[0].getBoundingClientRect()),e=d.height,f=d.width,g=a.offset().top,h=g+e,i=a.offset().left,j=i+f,k=c.width(),l=c.height(),m=b.ttPlacement,n={},o=b.ttAlign,p=b.ttOffset,q=14,r=48,s="left right".match(m)?2*r>e:2*r>f;switch(m){case"right":case"left":n.top="top"===o?s?g-r/2+b.ttOffsetTop:g+b.ttOffsetTop:s?h-l+r/2+b.ttOffsetTop:h-l-b.ttOffsetTop,n.left="right"===m?j+p+q+b.ttOffsetLeft:i-k-p-q+b.ttOffsetLeft;break;case"bottom":case"top":n.left="right"===o?s?j-k+r/2+b.ttOffsetLeft:i+(f-k)-b.ttOffsetLeft:s?i-r/2+b.ttOffsetLeft:i+b.ttOffsetLeft,n.top="top"===m?g-l-p-q+b.ttOffsetTop:h+p+q+b.ttOffsetTop}n.top+="px",n.left+="px",c.css(n)};b.$on("$destroy",function(){m.unbind("scroll",n),d.unbind("resize."+b.$id,n),l.remove()})}}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(){}}}).factory("tourtipMap",function(){var a=function(){this.map={}};a.prototype.set=function(a,b){angular.isNumber(a)&&!angular.isUndefined(b)&&(this.map[a]=b)},a.prototype.indexOf=function(a){return angular.forEach(this.map,function(b,c){return this.map[c]===a?Number(c):void 0}),-1},a.prototype.remove=function(a){delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return Object.keys(this.map).length},a.prototype.forEach=function(a){angular.forEach(this.map,function(b,c){a(b,c)})},a.prototype.first=function(){return this.map[0]};var b=function(){return new a};return b}).factory("scrollTo",["$interval","easingFunctions",function(b,c){var d=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)};return function(a,b,e,f){function g(e){return a[0].scrollTop=c[h.easing](j,a[0].scrollTop,b[0].offsetTop-a[0].scrollTop-h.offsetTop,h.duration),a[0].scrollLeft=c[h.easing](j,a[0].scrollLeft,b[0].offsetLeft-a[0].scrollLeft-h.offsetLeft,h.duration),j+=i?e-i:16,i=e,j<h.duration?d(g):void 0}angular.isFunction(e)&&(f=e,e=b);var h={scrollTarget:b,offsetTop:50,offsetLeft:50,duration:500,easing:"ease-in-out"};if(angular.extend(h,e),!c[h.easing])throw new Error('easing function: "'+h.easing+'" is unsupported by the `scrollTo` service');h.duration=parseInt(h.duration,10),h.offsetTop=parseInt(h.offsetTop,10);var i,j=0;d(g)}}]).factory("easingFunctions",function(){var a={};return a.linearTween=function(a,b,c,d){return c*a/d+b},a.easeInQuad=function(a,b,c,d){return a/=d,c*a*a+b},a.easeOutQuad=function(a,b,c,d){return a/=d,-c*a*(a-2)+b},a.easeInOutQuad=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},a.easeInCubic=function(a,b,c,d){return a/=d,c*a*a*a+b},a.easeOutCubic=function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},a.easeInOutCubic=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},a.easeInQuart=function(a,b,c,d){return a/=d,c*a*a*a*a+b},a.easeOutQuart=function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b},a.easeInOutQuart=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a+b:(a-=2,-c/2*(a*a*a*a-2)+b)},a.easeInQuint=function(a,b,c,d){return a/=d,c*a*a*a*a*a+b},a.easeOutQuint=function(a,b,c,d){return a/=d,a--,c*(a*a*a*a*a+1)+b},a.easeInOutQuint=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a*a+b:(a-=2,c/2*(a*a*a*a*a+2)+b)},a.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},a.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},a.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},a.easeInExpo=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},a.easeOutExpo=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},a.easeInOutExpo=function(a,b,c,d){return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b)},a.easeInCirc=function(a,b,c,d){return a/=d,-c*(Math.sqrt(1-a*a)-1)+b},a.easeOutCirc=function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},a.easeInOutCirc=function(a,b,c,d){return a/=d/2,1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:(a-=2,c/2*(Math.sqrt(1-a*a)+1)+b)},a.linear=a.linearTween,a.swing=a.easeInOutQuad,a["ease-in"]=a.easeInQuad,a["ease-out"]=a.easeOutQuad,a["ease-in-out"]=a.easeInOutQuad,a["ease-in-cubic"]=a.easeInCubic,a["ease-out-cubic"]=a.easeOutCubic,a["ease-in-out-cubic"]=a.easeInOutCubic,a["ease-in-quart"]=a.easeInQuart,a["ease-out-quart"]=a.easeOutQuart,a["ease-in-out-quart"]=a.easeInOutQuart,a["ease-in-quint"]=a.easeInQuint,a["ease-out-quint"]=a.easeOutQuint,a["ease-in-out-quint"]=a.easeInOutQuint,a["ease-in-sine"]=a.easeInSine,a["ease-out-sine"]=a.easeOutSine,a["ease-in-out-sine"]=a.easeInOutSine,a["ease-in-expo"]=a.easeInExpo,a["ease-out-expo"]=a.easeOutExpo,a["ease-in-out-expo"]=a.easeInOutExpo,a["ease-in-circ"]=a.easeInCirc,a["ease-out-circ"]=a.easeOutCirc,a["ease-in-out-circ"]=a.easeInOutCirc,a})}(window,document);