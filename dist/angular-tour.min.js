!function(a){"use strict";angular.module("angular-tour",["angular-tour.tour"]),angular.module("angular-tour.tour",["easingFunctions"]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",backLabel:"Back",finishLabel:"Finish",scrollSpeed:500,offset:5,appendToBody:!1,delay:0}).controller("TourController",["$scope","$rootScope","$attrs","$parse","tourtipMap",function(a,b,c,d,e){var f=this,g=d(c.step);f.postTourCallback=c.postTour||"angular.noop()",f.postStepCallback=c.postStep||"angular.noop()",f.currentIndex=0,f.newList=function(){a.tourActive&&f.cancelTour(),f.steps=e()},f.newList(),f.currentStep=f.steps.get(0),f.select=function(b){b&&(f.unselectAllSteps(),f.currentStep&&a.$parent.$eval(f.currentStep.ttPostStep),f.currentStep=b,f.currentIndex=b.index,a.$parent.$eval(f.currentStep.ttPreStep),b.open())},f.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)&&f.steps.set(a.index,a)},f.unselectAllSteps=function(){f.steps.forEach(function(a){a.close()})},f.cancelTour=function(){f.unselectAllSteps(),f.currentStep&&a.$parent.$eval(f.currentStep.ttPostStep),f.postStepCallback(),f.postTourCallback(),f.currentIndex=0,f.currentStep=null,a.tourActive=!1},f.setStep=function(b){g.assign(a.$parent,b.index),f.select(b)},b.openTour=function(){var b=f.steps.get(0);b&&(f.setStep(b),a.tourActive=!0)},b.closeTour=function(){f.cancelTour()},b.ttNextStep=function(a){if(a=(a||f.currentIndex)+1,a>=f.steps.getCount())return void f.cancelTour();var c=f.steps.get(a);c?f.setStep(c):b.ttNextStep(a)},b.ttPrevStep=function(a){if(a=(a||f.currentIndex)-1,0>a)return void f.cancelTour();var c=f.steps.get(a);c?f.setStep(c):b.ttPrevStep(a)}}]).directive("tour",["$rootScope",function(a){return{controller:"TourController",restrict:"EA",scope:!0,link:function(b,c,d,e){if(!angular.isDefined(d.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";b.$on(d.rebuildOn?d.rebuildOn:"$locationChangeStart",function(){e.newList()}),e.postTourCallback=function(){b.$parent.$eval(d.postTour||"angular.noop()")},e.postStepCallback=function(){b.$parent.$eval(d.postStep||"angular.noop()")},b.setNextStep=function(){a.ttNextStep()},b.setPrevStep=function(){a.ttPrevStep()}}}}]).directive("tourtip",["$window","$compile","$parse","$timeout","$sce","tourConfig",function(b,c,d,e,f,g){var h="<div tour-popup></div>";return{require:"^tour",restrict:"EA",scope:!0,compile:function(){angular.element(b);return{pre:function(a,b,c,e){c.$observe("tourtip",function(b){a.ttContent=f.trustAsHtml(b||"")}),c.$observe("tourtipPlacement",function(b){a.ttPlacement=b||g.placement}),c.$observe("tourtipAlign",function(b){a.ttAlign="top bottom".match(a.ttPlacement)?b||"left":b||"top"}),c.$observe("tourtipNextLabel",function(b){a.ttNextLabel=f.trustAsHtml(b||g.nextLabel)}),c.$observe("tourtipBackLabel",function(b){a.ttBackLabel=f.trustAsHtml(b||g.backLabel)}),c.$observe("tourtipFinishLabel",function(b){a.ttFinishLabel=f.trustAsHtml(b||g.finishLabel)}),c.$observe("tourtipOffset",function(b){a.ttOffset=parseInt(b,10)||g.offset}),c.$observe("tourtipOffsetTop",function(b){a.ttOffsetTop=parseInt(b,10)||0}),c.$observe("tourtipOffsetLeft",function(b){a.ttOffsetLeft=parseInt(b,10)||0}),c.$observe("tourtipAppendToBody",function(b){a.ttAppendToBody=a.$eval(b)||g.appendToBody}),c.$observe("tourtipPreStep",function(b){a.ttPreStep=d(b)||angular.noop}),c.$observe("tourtipPostStep",function(b){a.ttPostStep=d(b)||angular.noop}),c.$observe("tourtipDelay",function(b){a.ttDelay=parseInt(b,10)||g.delay}),a.index=parseInt(c.tourtipStep,10),a.open=function(){a.ttOpen=!0},a.close=function(){a.ttOpen=!1},a.isFirstStep=function(){var b=parseInt(a.index.toString(),10);for(e.steps.getCount();b>=0;)if(b-=1,e.steps.get(b))return!1;return!0},a.isLastStep=function(){for(var b=parseInt(a.index.toString(),10),c=e.steps.getCount();c>b;)if(b+=1,e.steps.get(b))return!1;return!0},a.close(),a.ttAnimation=g.animation,a.ttOffset=g.offset,e.addStep(a)},post:function(d,f){function i(b){for(var c=b.offsetTop,d=b.offsetLeft,e=b.offsetWidth,f=b.offsetHeight;b.offsetParent;)b=b.offsetParent,c+=b.offsetTop,d+=b.offsetLeft;return c>=a.pageYOffset&&d>=a.pageXOffset&&c+f<=a.pageYOffset+a.innerHeight&&d+e<=a.pageXOffset+a.innerWidth}function j(){if(d.ttContent){d.ttFirst=d.isFirstStep(),d.ttLast=d.isLastStep(),d.ttAppendToBody||n?(n&&m.bind("scroll",o),$("body").append(l),l.css({position:"fixed"})):f.append(l),l.css({display:"hidden"}),angular.element(b).bind("scroll",o),angular.element(b).bind("resize."+d.$id,o),d.ttAnimation?l.fadeIn():l.css({display:"block"}),r(f,l);var a={duration:g.scrollSpeed},c=100,e=100;("top"===d.ttPlacement||"bottom"===d.ttAlign)&&(c+=l.height()<f.height()?0:l.height()-f.height(),e+=l.width()<f.width()?0:l.width()-f.width()),a.offsetTop=c,a.offsetLeft=e,i(f[0])||f.scrollIntoView(a)}}function k(){m.unbind("scroll",o),angular.element(b).unbind("scroll",o),m.unbind("resize."+d.$id,o),l.detach()}var l=c(h)(d);f=f.height()||f.width()?f:f.parent();var m=f.scrollParent(),n=!m[0].tagName.match(/body/i),o=function(){r(f,l)};e(function(){d.$watch("ttOpen",function(a){a?j():k()})},500);var p=(l[0].getBoundingClientRect(),28),q=22,r=function(a,b){var c=d.ttAppendToBody,e=(a.scrollOffset(),a[0].getBoundingClientRect()),f=e.height,g=e.width,h=c||n?e.top:a.offset().top,i=c||n?e.bottom:h+f,j=c||n?e.left:a.offset().left,k=c||n?e.right:j+g,l=b.width(),m=b.height(),o=d.ttPlacement,r=d.ttAlign,s=d.ttOffset,t={},u=q+p/2,v="left right".match(o)?u>=f:u>=g,w=v?"left right".match(o)?"top".match(r)?u-f/2:u-f/2:"left".match(r)?u-g/2:u-g/2:0;"left right".match(o)?(t.top="top"===r?h-w+d.ttOffsetTop:i-m+w+d.ttOffsetTop,t.left="right"===o?k+s+q+d.ttOffsetLeft:j-l-s-q+d.ttOffsetLeft):(t.left="right"===r?k-l+w+d.ttOffsetLeft:j-w+d.ttOffsetLeft,t.top="top"===o?h-m-s-q+d.ttOffsetTop:i+s+q+d.ttOffsetTop),t.top+="px",t.left+="px",b.css(t)};d.preventDefault=function(a){a.preventDefault(),a.stopImmediatePropagation(),a.cancelBubble=!0},d.$on("$destroy",function(){m.unbind("scroll",o),angular.element(b).unbind("scroll",o),m.unbind("resize."+d.$id,o),l.remove()})}}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(){}}}).factory("tourtipMap",function(){var a=function(){this.map={}};a.prototype.set=function(a,b){angular.isNumber(a)&&!angular.isUndefined(b)&&(this.map[a]=b)},a.prototype.indexOf=function(a){var b=this;return angular.forEach(this.map,function(c,d){return b.map[d]===a?Number(d):void 0}),-1},a.prototype.remove=function(a){delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return Object.keys(this.map).length},a.prototype.forEach=function(a){angular.forEach(this.map,function(b,c){a(b,c)})},a.prototype.first=function(){var a=Object.keys(this.map).sort(function(a,b){return a>b});return this.map[a[0]]};var b=function(){return new a};return b}),angular.module("easingFunctions",[]).factory("PennerEasing",function(){var a={};return a.linearTween=function(a,b,c,d){return c*a/d+b},a.easeInQuad=function(a,b,c,d){return a/=d,c*a*a+b},a.easeOutQuad=function(a,b,c,d){return a/=d,-c*a*(a-2)+b},a.easeInOutQuad=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},a.easeInCubic=function(a,b,c,d){return a/=d,c*a*a*a+b},a.easeOutCubic=function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},a.easeInOutCubic=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},a.easeInQuart=function(a,b,c,d){return a/=d,c*a*a*a*a+b},a.easeOutQuart=function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b},a.easeInOutQuart=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a+b:(a-=2,-c/2*(a*a*a*a-2)+b)},a.easeInQuint=function(a,b,c,d){return a/=d,c*a*a*a*a*a+b},a.easeOutQuint=function(a,b,c,d){return a/=d,a--,c*(a*a*a*a*a+1)+b},a.easeInOutQuint=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a*a+b:(a-=2,c/2*(a*a*a*a*a+2)+b)},a.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},a.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},a.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},a.easeInExpo=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},a.easeOutExpo=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},a.easeInOutExpo=function(a,b,c,d){return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b)},a.easeInCirc=function(a,b,c,d){return a/=d,-c*(Math.sqrt(1-a*a)-1)+b},a.easeOutCirc=function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},a.easeInOutCirc=function(a,b,c,d){return a/=d/2,1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:(a-=2,c/2*(Math.sqrt(1-a*a)+1)+b)},a.linear=a.linearTween,a.swing=a.easeInOutQuad,a["ease-in"]=a.easeInQuad,a["ease-out"]=a.easeOutQuad,a["ease-in-out"]=a.easeInOutQuad,a["ease-in-cubic"]=a.easeInCubic,a["ease-out-cubic"]=a.easeOutCubic,a["ease-in-out-cubic"]=a.easeInOutCubic,a["ease-in-quart"]=a.easeInQuart,a["ease-out-quart"]=a.easeOutQuart,a["ease-in-out-quart"]=a.easeInOutQuart,a["ease-in-quint"]=a.easeInQuint,a["ease-out-quint"]=a.easeOutQuint,a["ease-in-out-quint"]=a.easeInOutQuint,a["ease-in-sine"]=a.easeInSine,a["ease-out-sine"]=a.easeOutSine,a["ease-in-out-sine"]=a.easeInOutSine,a["ease-in-expo"]=a.easeInExpo,a["ease-out-expo"]=a.easeOutExpo,a["ease-in-out-expo"]=a.easeInOutExpo,a["ease-in-circ"]=a.easeInCirc,a["ease-out-circ"]=a.easeOutCirc,a["ease-in-out-circ"]=a.easeInOutCirc,a}).run(["PennerEasing",function(b){var c=angular.element,d=angular.isNumber,e=angular.isFunction,f=angular.isElement,g=angular.isString,h=angular.isObject;jQuery||c.fn.extend({parents:function(){function a(d){var e=c(d).parent()[0];return b.unshift(e),e.tagName.match("BODY")?jQuery(b):a(e)}var b=[];return a(this)},filter:function(a){var b=[];return angular.forEach(this,function(c,d){a(c,d)&&b.push(c)},this),c(b)}}),c.fn.extend({scrollParent:function(){var a=this.css("position"),b="absolute"===a,d=this.parents().filter(function(){var a=$(this);return b&&"static"===a.css("position")?!1:/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==a&&d.length?d:c("body")},scrollParents:function(){function a(d){var e=c(d).scrollParent()[0];return b.unshift(e),e.tagName.match("BODY")?jQuery(b):a(e)}var b=[];return a(this)},scrollOffset:function(){var a=this.scrollParent(),b=!!a[0].tagName.match(/BODY/);return{top:b?this.offset().top:this.offset().top-a.offset().top+a.scrollTop(),left:b?this.offset().left:this.offset().left-a.offset().left+a.scrollLeft()}},scrollTo:function(a,i,j){function k(a){return r.scrollTop(m(t,p,n,parseInt(l.duration))),r.scrollLeft(m(t,q,o,parseInt(l.duration))),t+=s?a-s:16,s=a,t<l.duration?requestAnimationFrame(k):void(angular.isFunction(j)&&j())}if(g(a))a=isNaN(parseInt(a,10))?c(a)[0]:parseInt(a,10);else if(h(a)&&!f(a))throw new Error("Scroll target must be an HTML element, jqLite or jQuery object, selector string, or scrollTop nmerical value");e(i)&&(j=i,i={});var l={target:a,offsetTop:0,offsetLeft:0,duration:500,easing:"ease-in-out"};angular.extend(l,i),d(l.target)||l.target instanceof jQuery||(l.target=c(l.target));var m=b[l.easing];if(!m)throw new Error('easing function: "'+l.easing+'" is unsupported by the `scrollTo` service');var n,o,p,q,r=$(this);p=r.scrollTop(),q=r.scrollLeft(),n=d(l.target)?l.target-parseInt(l.offsetTop,10):l.target.scrollOffset().top-p-parseInt(l.offsetTop,10),o=d(l.target)?l.target-parseInt(l.offsetLeft,10):l.target.scrollOffset().left-q-parseInt(l.offsetLeft,10);var s,t=0;requestAnimationFrame(k)},scrollIntoView:function(b){e(b)&&(cb=b,b={});for(var d={},f=c(this).scrollParents(),g=1;g<f.length;g++)d.offsetTop=parseInt(a.innerHeight/(g+5),10),d.offsetLeft=parseInt(a.innerWidth/(g+5),10),c(f[g-1]).scrollTo(f[g],d);return $(this).scrollParent().scrollTo(this,b)}})}])}(window,document);