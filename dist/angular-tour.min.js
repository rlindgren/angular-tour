!function(){"use strict";angular.module("angular-tour",["angular-tour.tour"]);var a,b;angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",scrollSpeed:500,offset:28,frame:"html,body"}).controller("TourController",["$scope","$injector","orderedList",function(c,d,e){var f=this;a=d.has("$state"),b=a?"$stateChangeSuccess":"$locationChangeSuccess";var g=a?d.get("$state").current.name:d.get("$location").path();f.postTourCallback=angular.noop,f.postStepCallback=angular.noop,f.currentStep=0,c.$on(b,function(){f.currentStep=0,f[g]={},f[g].steps=e(),c.closeTour()}),f.select=function(a){if(angular.isNumber(a)){f.unselectAllSteps();var b=f[g].steps.get(a);b&&(b.ttOpen=!0),f.currentStep!==a&&(f.currentStep=a),a>=f[g].steps.getCount()&&f.postTourCallback(),f.postStepCallback()}},f.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)?f[g].steps.set(a.index,a):f[g].steps.push(a)},f.unselectAllSteps=function(){f[g].steps.forEach(function(a){a.ttOpen=!1})},f.cancelTour=function(){f.unselectAllSteps(),f.postTourCallback()},c.openTour=function(){f.select(0)},c.closeTour=function(){f.cancelTour()}}]).directive("tour",["$parse","$rootScope",function(a,b){return{controller:"TourController",restrict:"EA",scope:!0,link:function(c,d,e,f){if(!angular.isDefined(e.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var g=a(e.step);c.$watch(e.step,function(a){f.currentStep=a}),f.postTourCallback=function(){angular.isDefined(e.postTour)&&c.$parent.$eval(e.postTour)},f.postStepCallback=function(){angular.isDefined(e.postStep)&&c.$parent.$eval(e.postStep)},c.setCurrentStep=function(a){g.assign(c.$parent,a),f.currentStep=a,f.select(f.currentStep),b.$broadcast("$tour:nextStep"+(a-1))},c.getCurrentStep=function(){return f.currentStep}}}}]).directive("tourtip",["$window","$compile","$interpolate","$parse","$timeout","scrollTo","tourConfig",function(a,c,d,e,f,g,h){var i=(d.startSymbol(),d.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,compile:function(d,j){var k=j.tourtipStep,l=angular.element(a);return{pre:function(a,c,d,f){d.$observe("tourtip",function(b){a.ttContent=b}),d.$observe("tourtipPlacement",function(b){a.ttPlacement=b||h.placement}),d.$observe("tourtipNextLabel",function(b){a.ttNextLabel=b||h.nextLabel}),d.$observe("tourtipOffset",function(b){a.ttOffset=parseInt(b,10)||h.offset}),d.$observe("tourtipFrame",function(b){a.ttFrame=b||h.frame}),d.$observe("postStep",function(b){a.ttPostStep=b?e(b):angular.noop}),d.$observe("tourtipAlign",function(b){a.ttAlign="top bottom".match(a.ttPlacement)?b||"left":b||"top"}),a.ttOpen=!1,a.ttAnimation=h.animation,a.index=parseInt(k,10),f.addStep(a),a.$on(b,function(){f.addStep(a)})},post:function(a,b){function d(){if(a.ttContent){a.ttAnimation?n.fadeIn():n.css({display:"block"}),$("body").append(n),l.bind("resize."+a.$id,o),m.bind("scroll",o),p(j,n);var b={duration:h.speed,easing:"swing"};b.offsetTop="top"==a.ttPlacement||"bottom"==a.ttAlign?n.height()+m.offset().top+100:m.offset().top+100,g(m,j,b)}}function e(){n.detach(),l.unbind("resize."+a.$id,o),m.unbind("scroll",o)}var j,m,n=c(i)(a),o=function(){p(j,n)};f(function(){j=b.children().eq(0).length>0?b.children().eq(0):b,m=j.closest(a.ttFrame),a.$watch("ttOpen",function(a){a?d():e()})},500);var p=function(b,c){var d,e,f,g,i,j,k;switch(d=b[0].getBoundingClientRect(),e=c.width(),f=c.height(),j=b.width(),i=b.height(),k=h.offset,a.ttPlacement){case"right":case"left":g="top"==a.ttAlign?{top:d.top-(f>i?k:0)}:{top:d.top-(f>i?f-2*k:f)},g.left="right"==a.ttPlacement?d.left+j+a.ttOffset:d.left-e-a.ttOffset;break;case"bottom":case"top":g="left"==a.ttAlign?{left:d.left-(j>e?k:0)}:{left:d.left-(j>e?e-2*k:e)},g.top="bottom"==a.ttPlacement?d.top+i+a.ttOffset:d.top-f-a.ttOffset}g.top+="px",g.left+="px",c.css(g)};a.$on("$destroy",function(){l.unbind("resize."+a.$id,o),m.unbind("scroll",o),n.remove()}),a.$on("$tour:nextStep"+k,function(){a.ttPostStep(a.$parent)&&a.ttPostStep(a.$parent)()})}}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(){}}}).factory("orderedList",function(){var a=function(){this.map={},this._array=[]};a.prototype.set=function(a,b){if(angular.isNumber(a))if(a in this.map)this.map[a]=b;else{if(a<this._array.length){var c=a-1>0?a-1:0;this._array.splice(c,0,a)}else this._array.push(a);this.map[a]=b,this._array.sort(function(a,b){return a-b})}},a.prototype.indexOf=function(a){for(var b in this.map)if(this.map.hasOwnProperty(b)&&this.map[b]===a)return Number(b)},a.prototype.push=function(a){var b=this._array[this._array.length-1]+1||0;this._array.push(b),this.map[b]=a,this._array.sort(function(a,b){return a-b})},a.prototype.remove=function(a){var b=this._array.indexOf(a);if(-1===b)throw new Error("key does not exist");this._array.splice(b,1),delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return this._array.length},a.prototype.forEach=function(a){for(var b,c,d=0;d<this._array.length;d++)b=this._array[d],c=this.map[b],a(c,b)},a.prototype.first=function(){var a,b;return a=this._array[0],b=this.map[a]};var b=function(){return new a};return b}).factory("scrollTo",function(){return function(a,b,c,d){a=a instanceof jQuery?a:$(a),"function"==typeof c&&2==arguments.length&&(d=c,c=b);var e=$.extend({scrollTarget:b,offsetTop:50,duration:500,easing:"swing"},c),f="number"==typeof e.scrollTarget?e.scrollTarget:$(e.scrollTarget),g="number"==typeof f?f:f.offset().top+a.scrollTop()-parseInt(e.offsetTop);a.animate({scrollTop:g},parseInt(e.duration),e.easing,function(){"function"==typeof d&&d.call(this)})}})}(window,document);